(this["webpackJsonpproject-library"]=this["webpackJsonpproject-library"]||[]).push([[0],{192:function(e,t,c){"use strict";c.r(t);var o=c(0),r=c.n(o),n=c(37),a=c.n(n),s=(c(85),c(86),c(17)),i=c(1),l=function(){return Object(i.jsx)("nav",{className:"nav navbar-light bg-secondary p-2",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"nav navbar-dark",children:[Object(i.jsx)(s.b,{className:"nav-link active","aria-current":"page",to:"/",children:"Home"}),Object(i.jsx)(s.b,{className:"nav-link",to:"/books",children:"Books"}),Object(i.jsx)(s.b,{className:"nav-link",to:"/add_book",children:"Add book"})]})})})},d=c(5),b=c(11),j={addBook:"books/add book to books",getAllBooks:"books/get books from local storage",addCommentToBook:"books/add comment to book"},u={showLoader:"App/ start loader",hideLoader:"App/ stop loader"},m=function(){return{type:u.showLoader}},h=function(){return{type:u.hideLoader}},x=c(4),O=function(){return JSON.parse(localStorage.getItem("books"))||[]},p=function(){return function(e){e(m()),setTimeout((function(){try{e(k()),e(h())}catch(t){console.log(t.message)}}),1500)}},f=function(e){return function(t){t(m()),setTimeout((function(){try{!function(e){var t=[].concat(Object(x.a)(O()),[e]);localStorage.setItem("books",JSON.stringify(t))}(e),t(y(e)),t(h())}catch(c){console.log(c.message)}}),1500)}},v=function(e,t){return function(c){c(m()),setTimeout((function(){try{!function(e,t){var c=O(),o=c.findIndex((function(t){return t.id===e}));c[o].comments.push(t),c[o].rate=(c[o].comments.reduce((function(e,t){return e+ +t.note}),0)/c[o].comments.length).toFixed(1),localStorage.setItem("books",JSON.stringify(c))}(e,t),c(g(e,t)),c(h())}catch(o){console.log(o.message)}}),1e3)}},g=function(e,t){return{type:j.addCommentToBook,payload:{bookId:e,comment:t}}},k=function(){return{type:j.getAllBooks,payload:O()}},y=function(e){return{type:j.addBook,payload:e}},N=function(e){return Object(i.jsxs)("div",{className:"d-flex justify-content-center my-3",children:[Object(x.a)(Array(Math.floor(e))).map((function(e,t){return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-star-fill text-secondary me-1",viewBox:"0 0 16 16",children:Object(i.jsx)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"})},t)})),Math.round(e)>e&&Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-star-half text-secondary",viewBox:"0 0 16 16",children:Object(i.jsx)("path",{d:"M5.354 5.119 7.538.792A.516.516 0 0 1 8 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0 1 16 6.32a.548.548 0 0 1-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.52.52 0 0 1-.146.05c-.342.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 0 1-.172-.403.58.58 0 0 1 .085-.302.513.513 0 0 1 .37-.245l4.898-.696zM8 12.027a.5.5 0 0 1 .232.056l3.686 1.894-.694-3.957a.565.565 0 0 1 .162-.505l2.907-2.77-4.052-.576a.525.525 0 0 1-.393-.288L8.001 2.223 8 2.226v9.8z"})}),Object(x.a)(Array(Math.floor(5-e))).map((function(e,t){return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-star text-secondary me-1",viewBox:"0 0 16 16",children:Object(i.jsx)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"})},t)}))]})};function w(){return Object(x.a)(Array(Math.floor(5))).map((function(e,t){return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-star text-secondary me-1",viewBox:"0 0 16 16",children:Object(i.jsx)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"})},t)}))}var B=function(e){var t=e.rate;return N(t)},L=function(e){var t=e.book,c=e.history;return Object(i.jsx)("div",{className:"col mt-5",children:Object(i.jsxs)("div",{className:"card text-center h-100 mb-3 px-3",children:[Object(i.jsx)("div",{className:"card-body",children:Object(i.jsx)("img",{src:t.cover,className:"card-img-top",alt:"..."})}),Object(i.jsx)("h4",{className:"card-title",children:t.title}),Object(i.jsxs)("p",{children:["by: ",t.author]}),t.rate?Object(i.jsx)(B,{rate:+t.rate}):Object(i.jsx)("p",{style:{fontSize:"16px"},children:w()}),Object(i.jsx)("button",{className:"btn btn-secondary btn-sm mb-3 p-2",onClick:function(){c.push("/book/".concat(t.id))},children:"Read more"})]})})},A=Object(b.b)((function(e){return{books:e.BooksReducer.books}}),(function(e){return{getBooks:function(){return e(p())}}}))((function(e){var t=e.books,c=e.getBooks,r=e.history;return Object(o.useEffect)((function(){0===t.length&&c()}),[]),Object(i.jsxs)("div",{className:"container mt-5 text-secondary",children:[Object(i.jsx)("h2",{children:"List Of The Best Books"}),Object(i.jsx)("div",{className:"row row-cols-2 row-cols-md-4",children:t.map((function(e){return Object(i.jsx)(L,{book:e,history:r},e.id)}))})]})}));function S(){return Object(i.jsxs)("div",{className:"d-flex justify-content-center",style:{marginTop:"50px"},children:[Object(i.jsx)("div",{className:"spinner-grow text-secondary me-2",role:"status"}),Object(i.jsx)("div",{className:"spinner-grow text-secondary me-2",role:"status"}),Object(i.jsx)("div",{className:"spinner-grow text-secondary me-2",role:"status"})]})}var T=function(e){var t=e.comment;return Object(i.jsx)("div",{className:"card border-1",children:Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsxs)("h5",{className:"card-title text-secondary",children:["comment by: ",Object(i.jsxs)("b",{className:"text-success",children:["'",t.name,"'"]})," "]}),Object(i.jsx)("p",{className:"card-text h4",children:Object(i.jsx)("i",{children:t.comment})}),Object(i.jsxs)("p",{className:"card-text text-secondary font-italic",children:["Note: ",t.note]})]})})},C=function(e){var t=e.comments;return 0===t.length?Object(i.jsx)("h4",{children:"No comments yet"}):Object(i.jsx)("ul",{className:"list-unstyled w-75 mx-auto",children:t.map((function(e){return Object(i.jsx)("li",{className:"mb-1 text-start",children:Object(i.jsx)(T,{comment:e})},e.id)}))})},I=c(3),z=c(23),M=["label","id","error"],Q=function(e){var t=e.label,c=e.id,o=e.error,r=Object(z.a)(e,M);return Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:c,children:t}),Object(i.jsx)("input",Object(I.a)({id:c,className:"form-control mb-3"},r)),o&&Object(i.jsx)("p",{className:"text-danger",children:o})]})},R=["label","id","error"],q=function(e){var t=e.label,c=e.id,o=e.error,r=Object(z.a)(e,R);return Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:c,children:t}),Object(i.jsx)("textarea",Object(I.a)({id:c,className:"form-control mb-3"},r)),o&&Object(i.jsx)("p",{className:"text-danger",children:o})]})},F=["label","id","children","error"],E=function(e){var t=e.label,c=e.id,o=e.children,r=e.error,n=Object(z.a)(e,F);return Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:c,children:t}),Object(i.jsx)("select",Object(I.a)(Object(I.a)({id:c},n),{},{className:"form-select mb-3",children:o})),r&&Object(i.jsx)("p",{className:"text-danger",children:r})]})},J=c(29),V=Object(b.b)(null,(function(e){return{addCommentToBook:function(t,c){return e(v(t,c))}}}))((function(e){var t=e.bookId,c=e.addCommentToBook,o=Object(J.b)({defaultValues:{name:"",comment:"",note:""},onSubmit:function(e,o){var r=o.reset;console.log("onSubmit",e),c(t,Object(I.a)(Object(I.a)({},e),{},{id:Date.now()})),r()}}),r=o.form,n=(0,o.use)("errors",{errorWithTouched:!0});return Object(i.jsxs)("div",{className:"row g-2 w-75 mt-5 text-start m",children:[Object(i.jsx)("h5",{children:"Add your comment"}),Object(i.jsxs)("form",{ref:r,noValidate:!0,className:"w-100 mx-auto mt-2 mb-3 text-start",children:[Object(i.jsx)(Q,{label:"name",id:"name",name:"name",placeholder:"your name",reqired:!0,error:n.name}),Object(i.jsx)(q,{label:"comment",id:"comment",name:"comment",placeholder:"type your comment",reqired:!0,error:n.comment}),Object(i.jsxs)(E,{label:"your note",id:"note",name:"note",reqired:!0,error:n.note,children:[Object(i.jsx)("option",{value:"",disabled:!0,children:"Choice your note"}),Object(i.jsx)("option",{value:"5",children:"5"}),Object(i.jsx)("option",{value:"4",children:"4"}),Object(i.jsx)("option",{value:"3",children:"3"}),Object(i.jsx)("option",{value:"2",children:"2"}),Object(i.jsx)("option",{value:"1",children:"1"})]}),Object(i.jsx)("input",{type:"submit",className:"btn btn-primary w-100"})]})]})})),W=Object(b.b)((function(e){return{books:e.BooksReducer.books}}),(function(e){return{getBooks:function(){return e(p())}}}))((function(e){var t=e.match,c=e.history,r=e.books,n=e.getBooks;Object(o.useEffect)((function(){0===r.length&&n()}),[]);var a=+t.params.id,s=r.find((function(e){return e.id===a}));return 0===r.length?Object(i.jsx)(S,{}):Object(i.jsx)("div",{className:"container mt-5 ",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"card col-4 text-center mb-3 px-3",children:[Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("h3",{className:"card-title",children:s.title}),Object(i.jsxs)("h5",{children:["by: ",s.author]}),Object(i.jsx)("img",{src:s.cover,className:"card-img-top w-75",alt:"..."}),Object(i.jsx)("p",{className:"mt-3",children:s.description}),s.rate?Object(i.jsx)(B,{rate:+s.rate}):Object(i.jsx)("p",{style:{fontSize:"16px",color:"blue"},children:w()})]}),Object(i.jsxs)("p",{className:"text-danger",children:[s.pageQnt," pages"]}),Object(i.jsx)("hr",{}),Object(i.jsx)("button",{className:"btn btn-secondary btn-sm mb-3 p-2",onClick:function(){c.push("/books")},children:"Back to list"})]}),Object(i.jsxs)("div",{className:"col-8 px-5",children:[Object(i.jsx)("h3",{children:"Commentary"}),Object(i.jsx)(C,{comments:s.comments}),Object(i.jsx)(V,{bookId:s.id})]})]})})})),D=c(12),P=c.n(D),H=c(19),_=c(20),G=Object(b.b)(null,(function(e){return{addBook:function(t){return e(f(t))}}}))((function(e){var t,c=e.addBook,o=e.history,r=_.b().shape({title:_.c().min(3).required(),author:_.c().min(3).required(),cover:_.c().url(),description:_.c().required().min(15),pageQnt:_.a().required().positive().integer()}),n=Object(J.b)({defaultValues:{title:"",author:"",cover:"",description:"",pageQnt:""},validate:(t=r,function(){var e=Object(H.a)(P.a.mark((function e(c){var o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},e.prev=1,e.next=4,t.validate(c,{abortEarly:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.inner.forEach((function(e){var t=e.path,c=e.message;return Object(J.a)(o,t,c)}));case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),onSubmit:function(e,t){var r=t.reset;console.log("onSubmit: ",e),c(Object(I.a)(Object(I.a)({},e),{},{id:Date.now(),comments:[]})),r(),o.push("/books")}}),a=n.form,s=(0,n.use)("errors",{errorWithTouched:!0});return Object(i.jsxs)("div",{className:"container mt-5",children:[Object(i.jsx)("h2",{children:"Add your favorite book"}),Object(i.jsxs)("form",{className:"w-50 mx-auto mt-5 text-start",ref:a,noValidate:!0,children:[Object(i.jsx)(Q,{autoFocus:!0,label:"Book title",id:"title",name:"title",placeholder:"type book title",error:s.title}),Object(i.jsx)(Q,{label:"Book author",id:"author",name:"author",placeholder:"book author",error:s.author}),Object(i.jsx)(Q,{label:"Book cover",id:"cover",name:"cover",placeholder:"type book cover link",error:s.cover}),Object(i.jsx)(q,{label:"Book description",id:"description",name:"description",placeholder:"type book description",error:s.description}),Object(i.jsx)(Q,{label:"Page Quantity",id:"pageQnt",name:"pageQnt",placeholder:"type book Page Quantity",error:s.pageQnt}),Object(i.jsx)("input",{type:"submit",className:"btn btn-secondary w-100"})]})]})})),K=function(){return Object(i.jsx)("div",{className:"container-fluid",style:{backgroundImage:"url(https://umaine.edu/canam/wp-content/uploads/sites/149/2018/01/lib.png)",height:"100vh",backgroundRepeat:"none",backgroundSize:"cover",paddingTop:"200px"},children:Object(i.jsxs)("div",{className:"text-center text-white-50 w-50 mx-auto p-3",children:[Object(i.jsx)("h1",{className:"text-white",style:{fontSize:"36px"},children:"What to Read?"}),Object(i.jsx)("h4",{children:"Top 10 Most Interesting Books"})]})})},U=function(){return Object(i.jsxs)(d.c,{children:[Object(i.jsx)(d.a,{exact:!0,path:"/book/:id",component:W}),Object(i.jsx)(d.a,{path:"/books",component:A}),Object(i.jsx)(d.a,{path:"/add:book",component:G}),Object(i.jsx)(d.a,{path:"/",component:K})]})};var X=Object(b.b)((function(e){return{isLoading:e.AppReducer.isLoading}}))((function(e){var t=e.isLoading;return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(l,{}),t?Object(i.jsx)(S,{}):Object(i.jsx)(U,{})]})})),Y=(c(191),c(40)),Z=c(79),$={isLoading:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,c=t.type;switch(c){case u.showLoader:return Object(I.a)(Object(I.a)({},e),{},{isLoading:!0});case u.hideLoader:return Object(I.a)(Object(I.a)({},e),{},{isLoading:!1});default:return e}},te={books:[]},ce=function(e,t,c){var o=Object(x.a)(e.books),r=o.findIndex((function(e){return e.id===t})),n=Object(I.a)({},o[r]);return n.comments=[].concat(Object(x.a)(n.comments),[c]),n.rate=(n.comments.reduce((function(e,t){return e+ +t.note}),0)/n.comments.length).toFixed(1),o[r]=n,Object(I.a)(Object(I.a)({},e),{},{books:o})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,c=t.type,o=t.payload;switch(c){case j.getAllBooks:return Object(I.a)(Object(I.a)({},e),{},{books:Object(x.a)(o)});case j.addBook:return Object(I.a)(Object(I.a)({},e),{},{books:[].concat(Object(x.a)(e.books),[o])});case j.addCommentToBook:return ce(e,o.bookId,o.comment);default:return e}},re=c(80),ne=c.n(re),ae=Object(Y.b)({AppReducer:ee,BooksReducer:oe}),se=Object(Y.c)(ae,Object(Y.a)(Z.a,ne.a));a.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(b.a,{store:se,children:Object(i.jsx)(s.a,{children:Object(i.jsx)(X,{})})})}),document.getElementById("root"))},85:function(e,t,c){},86:function(e,t,c){}},[[192,1,2]]]);
//# sourceMappingURL=main.cb82dc69.chunk.js.map